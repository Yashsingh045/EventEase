---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";
import Hero from "../components/Hero.astro";
import Features from "../components/Features.astro";
import Testimonials from "../components/Testimonials.astro";
import FAQ from "../components/FAQ.astro";
import Contact from "../components/Contact.astro";
import CTA from "../components/CTA.astro";
import Footer from "../components/Footer.astro";
import UpcomingEvents from "../components/UpcomingEvents.astro";
import HowItWorks from "../components/HowItWorks.astro";
import Stats from "../components/Stats.astro";
import { API_BASE_URL } from "../config";

---

<Layout title="EventEase - Smart Event Management Platform">
    <Navbar />
    <main class="overflow-hidden">
        <!-- Hero Section -->
        <Hero />
        
        <!-- Upcoming Events -->
        <UpcomingEvents />
        
        <!-- How It Works -->
        <HowItWorks />
        
        <!-- Stats -->
        <Stats />
        
        <!-- Features -->
        <Features />
        
        <!-- Testimonials -->
        <Testimonials />
        

        
        <!-- FAQ -->
        <FAQ />
        
        <!-- CTA -->
        <CTA />
        
        <!-- Contact -->
        <Contact />
    </main>
    <Footer />
</Layout>

<script define:vars={{ API_BASE_URL }}>
    import api from "../lib/api";

    async function checkAuth() {
        try {
            const response = await api.get(`${API_BASE_URL}/api/user/me`);

            if (response.data.success) {
                window.location.href = "/exploreEvents";
            }
        } catch (error) {
            console.error("Error checking auth status:", error);
        }
    }

    checkAuth();
</script>
